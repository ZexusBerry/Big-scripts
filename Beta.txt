local player = game.Players.LocalPlayer
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Workspace = game:GetService("Workspace")
local checkBox1 = script.Parent.CustomMenu:WaitForChild("CustomCheckBoxFrame")

-- Создаем ScreenGui
local screenGui = Instance.new("ScreenGui")
screenGui.Parent = player:WaitForChild("PlayerGui")

-- Создаем кнопку

local Menu = Instance.new("Frame")
Menu.Name = "CustomMenu"
Menu.Size = UDim2.new(0.33, 0, 0.82, 0)  -- Увеличим высоту меню
Menu.Position = UDim2.new(0.17, 0, 0.44, 0)
Menu.AnchorPoint = Vector2.new(0.5, 0.5)
Menu.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
Menu.BorderSizePixel = 0
Menu.ClipsDescendants = true
Menu.Parent = ScreenGui

-- Функция для создания кнопки
local function CreateButton(text, position)
	local button = Instance.new("TextButton")
	button.Name = "CustomButton"
	button.Text = text
	button.Size = UDim2.new(0.8, 0, 0.08, 0)
	button.Position = position
	button.AnchorPoint = Vector2.new(0.5, 0)
	button.BackgroundColor3 = Color3.fromRGB(80, 80, 80)
	button.BorderColor3 = Color3.fromRGB(100, 100, 100)
	button.BorderSizePixel = 2
	button.Font = Enum.Font.SourceSans
	button.TextColor3 = Color3.new(1, 1, 1)
	button.TextSize = 20
	button.TextWrapped = true
	button.Parent = Menu
	return button
end

-- Функция для создания чекбокса
local function CreateCheckBox(text, position)
	local checkBoxFrame = Instance.new("Frame")
	checkBoxFrame.Name = "CustomCheckBoxFrame"
	checkBoxFrame.Size = UDim2.new(0.8, 0, 0.1, 0)
	checkBoxFrame.Position = position
	checkBoxFrame.AnchorPoint = Vector2.new(0.5, 0)
	checkBoxFrame.BackgroundTransparency = 1
	checkBoxFrame.Parent = Menu

	local checkBox = Instance.new("TextButton")
	checkBox.Name = "CustomCheckBox"
	checkBox.Text = ""
	checkBox.Size = UDim2.new(0.1, 0, 0.5, 0)
	checkBox.Position = UDim2.new(0, 0, 0, 0)
	checkBox.BackgroundColor3 = Color3.fromRGB(80, 80, 80)
	checkBox.BorderColor3 = Color3.fromRGB(100, 100, 100)
	checkBox.BorderSizePixel = 2
	checkBox.Font = Enum.Font.SourceSans
	checkBox.TextSize = 20
	checkBox.AutoButtonColor = false
	checkBox.Parent = checkBoxFrame

	local checkMark = Instance.new("Frame")
	checkMark.Name = "CheckMark"
	checkMark.Size = UDim2.new(0.8, 0, 0.8, 0)
	checkMark.Position = UDim2.new(0.1, 0, 0.1, 0)
	checkMark.BackgroundColor3 = Color3.fromRGB(100, 200, 100)
	checkMark.BorderSizePixel = 0
	checkMark.Visible = false
	checkMark.Parent = checkBox

	checkBox.MouseButton1Click:Connect(function()
		checkMark.Visible = not checkMark.Visible
		if checkMark.Visible then
			-- При нажатии на чекбокс перемещаем игрока к объекту "plate" и привязываем его к нему
			local plate = Workspace.Arena:FindFirstChild("plate")
			if plate then
				local character = player.Character
				if character then
					local humanoidRootPart = character:FindFirstChild("HumanoidRootPart")
					if humanoidRootPart then
						humanoidRootPart.CFrame = plate.CFrame
						humanoidRootPart.Anchored = true
						humanoidRootPart.CFrame = humanoidRootPart.CFrame * CFrame.new(0, 0, 5) -- Поднимаем игрока немного вверх, чтобы избежать столкновений с объектом
						humanoidRootPart.Anchored = false
						-- Прикрепляем игрока к объекту "plate"
						humanoidRootPart.CFrame = plate.CFrame * CFrame.new(0, humanoidRootPart.Size.Y / 2, 0)
						local weld = Instance.new("WeldConstraint")
						weld.Parent = humanoidRootPart
						weld.Part0 = humanoidRootPart
						weld.Part1 = plate
					end
				end
			end
		end
	end)

	local checkText = Instance.new("TextLabel")
	checkText.Name = "CheckText"
	checkText.Text = text
	checkText.Size = UDim2.new(0.55, 0, 0.5, 0)
	checkText.Position = UDim2.new(0.25, 0, 0, 0)
	checkText.BackgroundTransparency = 1
	checkText.Font = Enum.Font.SourceSans
	checkText.TextSize = 20
	checkText.TextColor3 = Color3.new(1, 1, 1)
	checkText.TextWrapped = true
	checkText.Parent = checkBoxFrame

	return checkBoxFrame
end

local button1 = CreateButton("Arena Farm (beta)", UDim2.new(0.5, 0, 0.05, 0))
local button2 = CreateButton("Get All Slappy", UDim2.new(0.5, 0, 0.17, 0))

-- Создание чекбоксов
local checkBox1 = CreateCheckBox("Get tycoon :D (10min)", UDim2.new(0.5, 0, 0.57, 0))


local player = game.Players.LocalPlayer
local button = script.Parent -- Предполагается, что кнопка находится в том же объекте, где находится этот скрипт

local isTeleporting = false -- Переменная для отслеживания состояния телепортации

-- Функция для телепортации игрока к объекту
local function teleportToButton()
	local retroDoor = workspace:FindFirstChild("Battlearena") -- Находим модель Battlearena в workspace
	if retroDoor then
		local buttonInside = retroDoor:FindFirstChild("Arena") -- Находим кнопку внутри модели
		if buttonInside then
			local buttonPosition = buttonInside.Position -- Получаем позицию кнопки
			local character = player.Character
			if character then
				local humanoidRootPart = character:FindFirstChild("HumanoidRootPart")
				if humanoidRootPart then
					humanoidRootPart.CFrame = CFrame.new(buttonPosition) + Vector3.new(0, 5, 0) -- Телепортируем игрока к кнопке с некоторым смещением вверх
				else
					warn("HumanoidRootPart не найден в персонаже.")
				end
			else
				warn("Персонаж не найден.")
			end
		else
			warn("Кнопка не найдена в модели Battlearena.")
		end
	else
		warn("Модель Battlearena не найдена в workspace.")
	end
end

-- Функция для периодического телепортирования
local function periodicTeleport()
	while isTeleporting do
		teleportToButton()
		wait(0.1) -- Ждем 1 секунду перед следующим телепортированием
	end
end

-- Привязываем функцию телепортации к событию нажатия кнопки
button1.MouseButton1Click:Connect(function()
	isTeleporting = not isTeleporting -- Изменяем состояние телепортации
	if isTeleporting then
		-- Запускаем функцию периодического телепортирования в новом потоке
		coroutine.wrap(periodicTeleport)()
	end
end)
